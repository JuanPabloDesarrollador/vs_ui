<div class="vs-background-color-light">
  <div class="row vs-margin-remove vs-display-flex">
    <div class="col col-sm-12 col-md-9 vs-margin-center">
      <div class="vs-section vs-margin-top-small  nabi-background-white">
        <mat-horizontal-stepper labelPosition="bottom" #stepper>
          <!-- first stepper -->
          <mat-step>
            <h1 class="vs-section-title vs-color-vs vs-text-align-center">
              SELECCIONA TU TIPO DE SERVICIO
            </h1>
            <p class="vs-text-align-center vs-color-default vs-margin-bottom-medium">
              Tenemos disponibilidad las 24 horas
            </p>
            <form [formGroup]="request">
              <div formGroupName="tipoDeServicio" class="vs-input-field row vs-text-align-center">
                <mat-radio-group formControlName="nombre" class="radio-group">
                  <mat-radio-button class="col-sm-12 col-md-4 radio-button" value="transporte de carga">
                    <img src="../../../assets/img/camion-radio.jpg" alt="">
                    <h1 class="vs-font-small vs-color-default vs-text-align-center">
                      Transporte de carga
                    </h1>
                  </mat-radio-button>
                  <mat-radio-button class="col-sm-12 col-md-4" value="alquiler de montacarga">
                    <img src="../../../assets/img/montacargas-radio.png" alt="">
                    <h1 class="vs-font-small vs-color-default vs-text-align-center">
                      Alquiler montacargas
                    </h1>
                  </mat-radio-button>
                  <mat-radio-button class="col-sm-12 col-md-4" value="alquiler de grua">
                    <img src="../../../assets/img/montacargas-radio.png" alt="">
                    <h1 class="vs-font-small vs-color-default vs-text-align-center">
                      Alquiler de gruas
                    </h1>
                  </mat-radio-button>
                </mat-radio-group>
              </div>
              <div class="vs-input-field vs-margin-top-medium col-sm-12 vs-text-align-right">
                <button mat-flat-button [disabled]="!request.controls.tipoDeServicio.valid" color="primary" matStepperNext>
                  CONTINUAR
                </button>
              </div>
            </form>
          </mat-step>
           <!-- second step -->
          <mat-step>
            <h1 class="vs-section-title vs-color-vs vs-text-align-center">
              {{ request.value.tipoDeServicio.nombre | uppercase }}? LISTO!!
            </h1>
            <p class="vs-text-align-center vs-color-default vs-margin-bottom-large">
              LLena los siguientes campos y te contactaremos un {{request.value.tipoDeServicio.nombre}} en minutos!!
            </p>
            <form [formGroup]="request" class="row" (ngSubmit)="nextStep(stepper)">
              <!-- Tipo de Servico-->
              <div formGroupName="tipoDeServicio" class="vs-input-field col-md-5">
                <span *ngIf="request.value.tipoDeServicio.nombre == 'transporte de carga'" class="vs-field-label">Tipo de Servicio</span>
                <span *ngIf="request.value.tipoDeServicio.nombre == 'alquiler de grua'" class="vs-field-label">Tipo de Servicio</span>
                <select *ngIf="request.value.tipoDeServicio.nombre == 'transporte de carga'" formControlName="especificamente" class="form-control" aria-placeholder="tipo de persona">
                  <option selected="true" disabled="disabled">Tipo de Servicio</option>
                  <option value="transporte de carga seca">Transporte de carga seca</option>
                  <option value="transporte de contenedores">Transporte de contenedores</option>
                  <option value="transporte de refrigerados">Transporte de refrigerados</option>
                  <option value="transporte de carga extradimensioanda">Transporte de carga extradimensioanda</option>
                </select>
                <select *ngIf="request.value.tipoDeServicio.nombre == 'alquiler de grua'" formControlName="especificamente" class="form-control" aria-placeholder="tipo de persona">
                  <option selected="true" disabled="disabled">Tipo de servicio</option>
                  <option value="gruá ph">Gruá PH</option>
                  <option value="gruá telescopica">Gruá Telescopica</option>
                  <option value="gruá de gancho">Gruá de Gancho</option>
                  <option value="gruá autodescargable">Gruá auto-descargable</option>
                  <option value="telehandler">Telehandler</option>
                  <option value="ManLift">ManLift</option>
                </select>
                <span *ngIf="submitted && errors.tipoDeServicio == 'Este campo es requerido'" class="invalid-feedback">
                  Este campo es requerido.
                </span>
              </div>
              <div class="col-sm-12"></div>

              <!-- Origen -->
              <div *ngIf="request.value.tipoDeServicio.nombre == 'transporte de carga'" class="vs-input-field col-md-3">
                <span class="vs-field-label">Origen</span>
                  <input placeholder="Ej: Bogotá" formControlName="origen">
                  <span *ngIf="submitted && request.controls['origen'].errors?.required" class="invalid-feedback">
                    Este campo es requerido.
                  </span>
                  <span *ngIf="submitted && request.controls['origen'].errors?.pattern" class="invalid-feedback">
                    Introduce un origen valido.
                  </span>
              </div>
              <!-- Destino -->
              <div *ngIf="request.value.tipoDeServicio.nombre == 'transporte de carga'" class="vs-input-field col-md-3">
                <span class="vs-field-label">Destino</span>
                <input matInput placeholder="Ej: Manizales" formControlName="destino">
                <span *ngIf="submitted && request.controls['destino'].errors?.pattern" class="invalid-feedback">
                  Introduce un destino valido.
                </span>
              </div>

              <div class="col-sm-12"></div>
                <!-- Tipo de Persona-->
                <div formGroupName="cliente" class="vs-input-field col-md-5">
                  <span class="vs-field-label">Tipo de persona</span>
                  <select formControlName="tipo" class="form-control" aria-placeholder="tipo de persona">
                    <option selected="true" disabled="disabled">Tipo de persona</option>
                    <option value="empresa">Empresa</option>
                    <option value="natural">Natural</option>
                  </select>
                  <span *ngIf="submitted && request.controls['cliente'].controls['tipo'].errors?.required" class="invalid-feedback">
                    Este campo es requerido.
                  </span>
                </div>
                <!-- Cedula or Nit-->
                <div *ngIf="request.value.cliente.tipo != ''" formGroupName="cliente" class="vs-input-field col-md-5">
                  <span class="vs-field-label">{{request.value.cliente.tipo == 'empresa' ? 'NIT' : 'Cedula'}}</span>
                  <input formControlName="documento" *ngIf="request.value.cliente.tipo == 'empresa'"  matInput>
                  <input formControlName="documento" *ngIf="request.value.cliente.tipo == 'natural'" matInput>
                  <span *ngIf="submitted && request.controls['cliente'].controls['documento'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && request.controls['cliente'].controls['documento'].errors?.pattern" class="invalid-feedback">
                      Introduce un {{request.value.cliente.tipo == 'empresa' ? 'NIT' : 'Cedula'}} valido.
                    </span>
                </div>
                <div class="col-sm-12"></div>
                  <div formGroupName="cliente" *ngIf="request.value.cliente.tipo == 'empresa'"  class="vs-input-field col-md-5">
                    <span class="vs-field-label">Nombre Empresa</span>
                    <input formControlName="nombreEmpresa" matInput>
                  </div>
                  <div class="col-sm-12"></div>
                  <div *ngIf="request.value.tipoDeServicio.nombre == 'alquiler de montacarga'" class="vs-input-field col-md-3">
                    <span class="vs-field-label">Ciudad</span>
                    <input placeholder="Ej: Bogotá" formControlName="origen">
                    <span *ngIf="submitted && request.controls['origen'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && request.controls['origen'].errors?.pattern" class="invalid-feedback">
                      Introduce un origen valido.
                    </span>
                  </div>
                    <div class="col-sm-12"></div>
                <!-- Mensaje-->
                <div class="vs-input-field multiline col-md-6">
                  <span class="vs-field-label"> Mensaje acerca tu solicitud</span>
                  <textarea formControlName="mensaje" class="txt-a" matInput> </textarea>
                  <span *ngIf="submitted && request.controls['mensaje'].errors?.required" class="invalid-feedback">
                    Este campo es requerido.
                  </span>
                  <span *ngIf="submitted && request.controls['mensaje'].errors?.pattern" class="invalid-feedback">
                    Introduce un mensaje valido.
                  </span>
                </div>
                <div class="vs-input-field col-sm-12 vs-text-align-right vs-margin-top-medium">
                  <button class="vs-color-vs" color="accent" mat-button matStepperPrevious>REGRESAR</button>
                  <button mat-flat-button color="primary">CONTINUAR</button>
                </div>
            </form>
          </mat-step>
          <mat-step>
            <h1 class="vs-section-title vs-color-vs vs-text-align-center">
              BIEN, YA ESTAMOS CASI LISTOS!!!
            </h1>
            <p class="vs-text-align-center vs-color-default vs-margin-bottom-large">
               Registrate para darle seguimiento a tu solicitud
            </p>
            <form [formGroup]="user" class="row">
              <div class="vs-margin-center">
                  <div class="vs-input-field col-md-5">
                    <span class="vs-field-label">Nombre</span>
                    <input formControlName="nombre" matInput>
                    <span *ngIf="submitted && user.controls['nombre'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && user.controls['nombre'].errors?.pattern" class="invalid-feedback">
                      Introduce un nombre valido.
                    </span>
                    <span *ngIf="submitted && user.controls['nombre'].errors?.maxlength" class="invalid-feedback">
                      Maximo limite de carateres 20.
                    </span>
                  </div>
                  <div class="vs-input-field col-md-5">
                    <span class="vs-field-label">Apellido</span>
                    <input formControlName="apellido" matInput>
                    <span *ngIf="submitted && user.controls['apellido'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && user.controls['apellido'].errors?.pattern" class="invalid-feedback">
                      Introduce un apellido valido.
                    </span>
                    <span *ngIf="submitted && user.controls['apellido'].errors?.maxlength" class="invalid-feedback">
                      Maximo limite de carateres 20.
                    </span>
                  </div>
                  <div class="col-sm-12"></div>
                  <div class="vs-input-field col-md-5">
                    <span class="vs-field-label">Telefono</span>
                    <input formControlName="telefono" matInput>
                    <span *ngIf="submitted && user.controls['telefono'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && user.controls['telefono'].errors?.pattern" class="invalid-feedback">
                      Introduce un telefono valido.
                    </span>
                  </div>
                  <div class="vs-input-field col-md-5">
                    <span class="vs-field-label">Ciudad</span>
                    <input formControlName="ciudad" matInput>
                    <span *ngIf="submitted && user.controls['ciudad'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && user.controls['ciudad'].errors?.pattern" class="invalid-feedback">
                      Introduce un telefono valido.
                    </span>
                  </div>
                  <div class="col-sm-12"></div>
                  <div class="vs-input-field col-md-5">
                    <span class="vs-field-label">Correo</span>
                    <input formControlName="correo" matInput>
                    <span *ngIf="submitted && user.controls['correo'].errors?.required" class="invalid-feedback">
                      Este campo es requerido.
                    </span>
                    <span *ngIf="submitted && user.controls['correo'].errors?.pattern" class="invalid-feedback">
                      Introduce un correo valido.
                    </span>
                  </div>
                  <div class="col-sm-12"></div>
              <div class="vs-input-field col-md-5">
                <span class="vs-field-label">
                  Contraseña
                </span>
                <input formControlName="contrasena" matInput>
              </div>
              </div>
              {{serverErrorMessages}}
            </form>
            <div class="vs-input-field col-sm-12 vs-text-align-right vs-margin-top-medium">
              <button class="vs-color-vs" color="accent" mat-button matStepperPrevious>REGRESAR</button>
              <button mat-flat-button color="primary" (click)="register()" matStepperNext>CONTINUAR</button>
            </div>
            <div>
              <button mat-button matStepperPrevious>Back</button>
              <button mat-button (click)="stepper.reset()">Reset</button>
            </div>
         </mat-step>
       </mat-horizontal-stepper>
      </div>
    </div>
  </div>
</div>
