<div class="row vs-display-flex vs-margin-top-xsmall">
    <div class="col col-xs-10 col-md-5 col-lg-5 vs-margin-center vs-margin-top-small">
      <div class="vs-section vs-text-align-center col-md-12 vs-background-color-white request-view animated fadeIn">
        <div class="vs-text-align-right">
            <button mat-button class="vs-color-default" [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button (click)="solicitudCompletada(requestDetails.usuario._id)" *ngIf="requestDetails?.estado === 'en proceso'"class="vs-color-grey" mat-menu-item>
                <mat-icon class="vs-margin-remove">
                  check_circle
                </mat-icon>
                Solicitud completada
              </button>
              <button (click)="cancelarSolicitud(requestDetails.usuario._id)" class="vs-color-grey" mat-menu-item>
                <mat-icon class="vs-margin-remove">cancel</mat-icon>
                  Cancelar solicitud
                </button>
            </mat-menu>
        </div>
        <img src="../../../../assets/img/servicios/{{requestDetails?.tipoDeServicio.nombre}}.png" alt="">
        <h1 class="vs-color-vs vs-font-large">
          {{requestDetails?.tipoDeServicio?.nombre | firstChartUppercase }}
        </h1>
        <h1 *ngIf="requestDetails?.tipoDeServicio?.especificamente" class="vs-color-grey vs-font-small vs-margin-remove">
         ( {{requestDetails?.tipoDeServicio?.especificamente | firstChartUppercase }} )
        </h1>
        <div class="vs-margin-top-small">
          <h1 class="vs-font-small vs-color-grey vs-display-inline">
            Origen:
          </h1>
          <p class="vs-color-grey vs-font-small vs-margin-remove vs-display-inline">
            {{requestDetails?.origen | firstChartUppercase }}
          </p>
        </div>
        <div *ngIf="requestDetails?.destino">
          <h1 class="vs-font-small vs-color-grey vs-display-inline vs-margin-remove ">
            Destino:
          </h1>
          <p class="vs-color-grey vs-font-small vs-margin-remove vs-display-inline">
            {{requestDetails?.destino | firstChartUppercase }}
          </p>
        </div>
        <div class="vs-margin-top-small">
          <h1 class="vs-font-small">
            Cliente:
          </h1>
          <p class="vs-color-grey vs-font-small vs-margin-remove">
            {{requestDetails?.usuario.name | firstChartUppercase }}
            {{requestDetails?.usuario.lastName | firstChartUppercase }}
          </p>
            <h1 class="vs-font-small">
              {{requestDetails?.cliente.nombreEmpresa ? 'Empresa' : 'Natural' }}
            </h1>
            <p *ngIf="requestDetails?.cliente.nombreEmpresa; else natural" class="vs-color-grey vs-font-small vs-margin-remove">
              {{requestDetails?.cliente.nombreEmpresa | firstChartUppercase }}
              <span class="vs-color-grey vs-font-small vs-margin-remove">NIT:</span>
              ({{requestDetails?.cliente.documento}})
            </p>
            <ng-template #natural>
              <p class="vs-color-grey vs-font-small vs-margin-remove">
                 Documento:
                ({{requestDetails?.cliente.documento}})
              </p>
            </ng-template>
          <h1 class="vs-font-small">
            Telefono:
          </h1>
          <p class="vs-color-grey vs-font-small vs-margin-remove">
            {{requestDetails?.usuario.cellPhone }}
          </p>
          <h1 class="vs-font-small">
            Correo:
            </h1>
            <p class="vs-color-grey vs-font-small vs-margin-remove">
              {{requestDetails?.usuario.email }}
            </p>
        </div>
        <div class="vs-margin-top-medium">
          <h1 class="vs-font-small">
            Mensaje:
          </h1>
          <p class="vs-margin-remove vs-color-grey">
            {{requestDetails?.mensaje}}
          </p>
        </div>
        <div class="vs-margin-top-medium vs-margin-bottom-small">
          <h1 class="vs-font-small">
            Fecha Creacion:
          </h1>
          <p class="vs-margin-remove vs-color-grey">
            {{requestDetails?.created_at | amLocale: 'es'  | amTimeAgo}}
          </p>
        </div>
        <h1 *ngIf="requestDetails?.estado === 'recibido'" class="vs-font-xsmall vs-text-align-left vs-color-vs vs-margin-bottom-xsmall vs-margin-remove">
          MENSAJES DE ACEPTACION
        </h1>
        <hr>
        <div *ngIf="requestDetails?.estado === 'recibido'" class="vs-input-field multiline vs-margin-top-small">
          <input [(ngModel)]="mensaje" class="txt-a" matInput />
        </div>
        <div *ngIf="requestDetails?.estado === 'recibido'; else name">
          <div class="col col-md-12 col-md-12">
            <button *ngIf="!isLoading; else spinner" (click)="aceptarSolicitud(requestDetails.usuario._id)"
              mat-raised-button
              class="vs-text-uppercase vs-remove-shadow"
              color="primary"
            >
              ACEPTAR SOLICITUD
            </button>
            <ng-template #spinner>
              <mat-spinner class="vs-margin-center"></mat-spinner>
            </ng-template>
          </div>
        </div>
        <ng-template #name>
          <div class="vs-margin-top-small">
            <div class="col col-xs-12 col-md-6">
              <button [routerLink]="['/dashboard/admin/chat', requestDetails?._id]" mat-raised-button [routerLink]="['/dashboard/chat/6']" class="vs-text-uppercase  vs-remove-shadow vs-margin-top-xsmall" color="primary">
                Enviar mensaje
              </button>
            </div>
            <div class="col col-xs-12 col-md-6">
              <button mat-raised-button [routerLink]="['/dashboard/admin']" class="vs-text-uppercase  vs-remove-shadow vs-background-color-default vs-margin-top-xsmall" color="primary">
                ir al dashboard
              </button>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
</div>

